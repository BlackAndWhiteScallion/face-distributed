<!DOCTYPE html>
<html>
<head>
  <title>Selfie Video Processing</title>
  <style>
    .video-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .queue-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .worker {
      border: 1px solid #ccc;
      border-radius: 5px;
      margin: 10px;
      padding: 10px;
      width: 200px;
    }
    .worker h4 {
      margin-top: 0;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Selfie Video Processing</h1>

  <form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="selfieVideo" id="selfieVideo" accept="video/*" />
    <input type="submit" value="Upload" />
  </form>

  <div class="video-container">
    <video id="processedVideo" controls></video>
  </div>

  <div class="queue-container">
    <div class="worker">
      <h4>Worker Machine 1</h4>
      <p>IP Address: <span id="worker1IP"></span></p>
      <p>Unprocessed Frames: <span id="worker1Unprocessed"></span></p>
      <p>Completed Frames: <span id="worker1Completed"></span></p>
      <p>Average Time: <span id="worker1Average"></span></p>
    </div>
    <div class="worker">
      <h4>Worker Machine 2</h4>
      <p>IP Address: <span id="worker2IP"></span></p>
      <p>Unprocessed Frames: <span id="worker2Unprocessed"></span></p>
      <p>Completed Frames: <span id="worker2Completed"></span></p>
      <p>Average Time: <span id="worker2Average"></span></p>
    </div>
    <!-- Add more worker machines as needed -->
  </div>

  <script>
    // Update worker information with sample data
    document.getElementById("worker1IP").textContent = "192.168.0.1";
    document.getElementById("worker1Unprocessed").textContent = "10";
    document.getElementById("worker1Completed").textContent = "50";
    document.getElementById("worker1Average").textContent = "2 seconds";

    document.getElementById("worker2IP").textContent = "192.168.0.2";
    document.getElementById("worker2Unprocessed").textContent = "5";
    document.getElementById("worker2Completed").textContent = "30";
    document.getElementById("worker2Average").textContent = "1.5 seconds";

    // Handle form submission
    document.getElementById("uploadForm").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent form submission

      var fileInput = document.getElementById("selfieVideo");
      var videoElement = document.getElementById("processedVideo");

      // Check if a file is selected
      if (fileInput.files.length > 0) {
        var file = fileInput.files[0];
        var url = URL.createObjectURL(file);
        videoElement.src = url;
        processVideo(file);
      }
    });

    // Process the uploaded video
    function processVideo(videoFile) {
      // Implement your video processing logic here
      // This is just a sample implementation

      // Simulate processing and update worker information
      var processingTime = Math.floor(Math.random() * 5) + 1; // Random processing time between 1 and 5 seconds

      setTimeout(function() {
        // Update worker information with processed frames
        var completedFrames = Math.floor(Math.random() * 100) + 1; // Random number of completed frames
        document.getElementById("worker1Completed").textContent = completedFrames;
        document.getElementById("worker2Completed").textContent = completedFrames;

        // Update worker information with average time
        var averageTime = (completedFrames / processingTime).toFixed(2);
        document.getElementById("worker1Average").textContent = averageTime + " seconds";
        document.getElementById("worker2Average").textContent = averageTime + " seconds";
      }, processingTime * 1000); // Convert processing time to milliseconds
    }
  </script>
</body>
</html>
